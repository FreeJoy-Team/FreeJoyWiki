

[На стартовую страницу](../README.md) | [Предыдущий раздел](Подключение-осей.md)

## Назначение логических осей:

![](../images/A2.png)
 
Как и в случае с кнопками мы должны назначить необходимым логическим осям физические оси.

Название аналоговой оси, выводимой на компьютер обозначено в левом верхнем углу поля этой оси. Всего может быть 8 осей: X, Y, Z, Rx, Ry, Rz, Slider1, Slider2.

Вы можете назначить любую физическую ось на любую логическую в поле "Axis source 1". При этом:
* для аналоговых физических осей ([переменных резисторов](Подключение-переменных-резисторов.md) или  [датчиков Холла](Подключение-датчиков-Холла)) обозначением будет являться сигнальный контакт (средний контакт переменного резистора или сигнальный вывод датчика Холла, в примере на ось X назначен аналоговый датчик, сигнальный контакт которого подключен к А7)
* для цифровых датчиков SPI ([TLE5010/5011](Подключение-датчиков-TLE5010-5011.md),  [MLX90393](Подключение-датчиков-MLX90393.md), внешних АЦП  [MCP32XX](Подключение-аналоговых-датчиков-через-внешний-АЦП-MCP32XX.md)) – контакт выбора чипа (в примере на ось Y назначен датчик MLX90393 контакт CS которого подключен к А15).
* для цифровых датчиков I2C ([AS5600](Подключение-датчика-AS5600.md), внешних АЦП [ADS1115](Подключение-аналоговых-датчиков-через-внешний-АЦП-ADS1115.md)) - указывается название интерфейса I2C, и в поле "I2C address" указывается тип датчика и адрес (для  [ADS1115](Подключение-аналоговых-датчиков-через-внешний-АЦП-ADS1115.md)) заданный присоединением контакта ADDR (в примере на ось Z назначен внешний АЦП [ADS1115](Подключение-аналоговых-датчиков-через-внешний-АЦП-ADS1115.md) с адресом 01)

Кроме того для многоканальных датчиков ([MLX90393](Подключение-датчиков-MLX90393.md)) и АЦП ([АЦП ADS1115](Подключение-аналоговых-датчиков-через-внешний-АЦП-ADS1115.md) и  [MCP32XX](Подключение-аналоговых-датчиков-через-внешний-АЦП-MCP32XX.md)) в поле Channel/Encoder необходимо указать номер канала (каналы нумеруются с 0) с которого мы хотим получать данные. (в примере на оси Y мы берем показания со второго канала датчика [MLX90393](Подключение-датчиков-MLX90393.md), а на оси Z с первого канала внешнего АЦП [ADS1115](Подключение-аналоговых-датчиков-через-внешний-АЦП-ADS1115.md) с адресом 01). В случае с энкодером указывается номер энкодера назначенный ему на вкладке "Encoders".

У неиспользуемых в проекте осей необходимо снять галку Output enabled.
**Неиспользуемые оси не будут показываться операционной средой, если будет установлен чекбокс "Dinamic HID config" поля [HID Settings](Продвинутые-настройки.md)**

Красная шкала «Out» показывает какие значения логической оси выдаются операционной системе, зеленая шкала «Raw» показывает какие значения физической оси контроллер принимает от датчика.
## Калибровка осей.
После назначения осей оси необходимо откалибровать. (Т.е. сделать так, чтобы полный ход физической оси соответствовал полному ходу логической оси.) Калибровать оси FreeJoy средствами Windows крайне не рекомендуется!
### Калибровка оси без центра.
1. Нажать кнопку Start calibration.
1. Подвигать ось из одного крайнего положения в другое.
1. Нажать кнопку Stop calibration.
1. Снять галочку с чекбокса «Center».
1. Записать результаты калибровки в контролер.
### Калибровка оси с центром.
1. Нажать кнопку Start calibration.
1. Подвигать ось из одного крайнего положения в другое и оставить в центральном положении.
1. Нажать кнопку Stop calibration.
1. Записать результаты калибровки в контролер.
### Калибровка цифрового датчика TLE5011 со смещением диапазона.
В случае если вы установили цифровой датчик и при движении его из одного крайнего положения в другое значения физ. Оси проходят через ноль (т.е. растут до максимального значения сбрасываются на ноль и продолжают расти от нуля), необходимо сдвинуть диапазон показаний датчика:
1. В поле логической оси поставить галку «Offset».
1. В поле «Offset» установить 180.
1. Записать настройки с контроллер.
1. Проверить перемещением оси, что теперь ось не проходит через ноль.
1. При необходимости, если ось все так же проходит через ноль: скорректировать значения поля «Offset», повторить п.п. 2-5.
1. Калибровать ось как описано выше для осей с центром или без центра.
## Дополнительная настройка осей:
В поле каждой логической оси доступны следующие настройки:
* Inverted – инвертирует логическую ось (ось будет регулироваться в противоположном направлении);
* Resolution – разрешение оси в битах. При том число отсчетов на диапазон движения оси будет равен 2 в степени, указанной в поле Resolution. Для аналоговых осей, как правило, имеют смысл значения не более 12. Для цифровых датчиков можно увеличить разрешение до 16 (65536 отсчетов).
* Dynamic Deadband – установка для оси динамической мертвой зоны. Величина динамической мертвой зоны указывается в поле «Deadband» ниже. При этом изменения значения оси н величину не превышающую значения поля «Deadband» учитываться не будут. Для устранения дрожжания оси меет смысл постепенно увеличивать значения динамической метрвой зоны (не забывая при каждом изменении значения записывать конфигурацию в контроллер) до тех пор, пока значения логической оси не перестанут изменяться самопроизвольно при отсутствии движения физической оси. При снятой галке “Dynamic deadband” заданный размер мертвой зоны применяется к центральной мертвой зоне.
* Filter – ползунок позволяющий задать фильтр оси. Может быть: Off, Level1… Level 7. При этом, чем выше значение фильтра, тем больше будет отставание изменения значений логической оси за физической осью, поэтому для ответственных осей не рекомендуется выставлять фильтр в значение выше Level 3.
* На вкладке Axis Curves можно задать закономерность изменения значений каждой логической оси от физической отличную от линейной. Можно воспользоваться предуставленными кривыми (линейная зависимость (по умолчанию), экспоненциальная, обратно экспоненциальная, произвольная кривые) либо отредактировать любую из этих кривых двигая движки, соответствующие каждой точке вверх/вниз.
* Prescaler - коээфициент масштабирования оси задаваемй в процентах. Возможны значения от 1% до 255% 
## Функции сложения осей:
В поле Function можно задать способ взаимного влияния двух осей.

При этом первым источником является физическая ось (указанная в поле Axis source 1 (далее в формулах AS1) вторая – логическая (указанная в поле Axis source 2 (далее в формулах AS2).
Доступны следующие функции:

* Plus = (AS1+AS2)+32767 Т.е. минимум результирующей оси достигается при минимуме обеих осей-источников, Максимум – при максимуме одной из осей-источника.
* Minus = (AS1-AS2)-32767 вычитание со смещением влево на половину оси.
* Equal AS1=AS2 приравнивание значения одной оси к значению другой

Функции "Plus" и "Minus" меняются при включенном чекбоксе "Center":
* Plus = (AS1+AS2)/2. Т.е. минимум результирующей оси достигается при минимуме обеих осей-источников, Максимум – при максимуме.
* Minus = (AS1-AS2)/2 Т.е. результирующая ось находится в центре при минимуме обеих осей-источников, При максимуме одной оси-источника, результирующая ось отклоняется к максимуму, при максимуме второй – к минимуму.

## Кнопки для вспомогательных функций оси
Для каждой оси можно назначить до 3х кнопок со вспомогательными функциями для оси, такими как триммирование (подстройка) оси или активация функции сложения осей.

Для данных кнопок возможно назначение следующих функций:
* Down - уменьшение значения оси на значение равное 32767 делить на значение заданное в поле Step Divider;
* Up - увеличение значения оси на значение равное 32767 делить на значение заданное в поле Step Divider;
* Reset - сброс изменений значений оси с помощью кнопок;
* Center - установка текущего "сырого" значения логическим центром оси;
* Function_Enable - активация функции сложения осей;
* Prescaler_Enable - активация предделителя оси, заданного в поле Prescaler .


Так же возможна настройка [преобразования движения осей в нажатия кнопок](Преобразование-движения-осей-в-нажатия-кнопок.md)

[На стартовую страницу](../README.md) | [Предыдущий раздел](Подключение-осей.md)


