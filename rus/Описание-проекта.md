# FreeJoy

FreeJoy - настраиваемый контроллер игрового устройства, основанный на недорогом микроконтроллере STM32F103C8. Он позволяет создавать собственные HOTAS – системы (РУС, РУД, всевозможные панели расширения), педали, автомобильные системы управления (рулевые колеса, педали, рычаги коробок передач и т.д.) и настраивать сконструированное устройство.

![](../images/main.png)

## Возможности:

* До 8 – аналоговых осей  (выходное разрешение 12 бит);
* До 128 кнопок или тумблеров;
* До 4 HAT-переключателей;
* До 16 инкрементальных энкодеров (из них 1 с высоким разрешением);
* Возможность назначения нажатий кнопок на определенные положения аналоговой оси (до 12 кнопок на ось);
* Поддержка сдвиговых регистров 74HC165 и CD4021 для увеличения количества подключаемых кнопок;
* Поддержка цифровых датчиков Холла TLE5010/TLE5011,  AS5600, MLX90393 (только интерфейс SPI);
* Поддержка внешних АЦП ADS1115 и MCP3201/02/04/08;
* 3 канала ШИМ для управления подсветкой;
* 24 светодиода (одиночные или в матрице), привязываемые к состояниям кнопок;
* Настройка имени устройства и других параметров USB;
* Удобная утилита для конфигурации;
* Обновление прошивки по USB;
* Сохранение и загрузка конфигурации устройства из файла.

## Оси:

![](../images/A2.png)

FreeJoy поддерживает до 8 осей, источниками которых могут быть аналоговые входы (потенциометры, датчики холла) на выводах A0-A7, цифровые датчики (TLE5010/5011, AS5600, MLX90393), либо внешние АЦП (ADS1115 и MCP3201/02/04/08). Все оси имеют следующие настройки:

* Источник/назначение оси (X, Y, Z, Rx, Ry, Rz, Slider1, Slider2);
* Включение/отключение вывода оси;
* Изменение разрешения;
* Калибровка (ручная/автоматическая);
* Сглаживание (откл или 7 уровней настройки фильтра);
* Инверсия;
* Динамическая мертвая зона;
* Опция смещения оси (магнита);
* Настройка кривых отклика;
* Оси из энкодеров;
* Возможность подстройки вывода оси кнопками/энкодером;
* Коэффициент масштабирования оси;
* Возможность генерации нажатий кнопок в определенных положениях оси (до 12 участков).
* Функции для взаимного влияния осей;


## Кнопки:

![](../images/B1.png)

FreeJoy – поддерживает до 128 кнопок поключенных как одиночные кнопки (замыкание сигнального контакта на 0 или на питание), как матрица кнопок, посредством сдвиговых регистров, либо через функцию ось в кнопки. Кнопки могут быть настроены как:

* Нормальная кнопка;
* Тумблер на включение/отключение (Toggle switch ON/OFF);
* Тумблер на включение (Toggle switch ON);
* Тумблер на отключение (Toggle switch OFF);
* HAT-переключатель;
* Вход инкрементального энкодера;
* Радиокнопка;
* Фиксирующаяся кнопка последовательного переключения;
* Нефиксирующаяся кнопка последовательного переключения;
* 5 шифтов.

Для кнопок возможно применение таймеров задержки нажатия и времени удержания, а также настройка времени антидребезга. 


Для настройки контроллера понадобится программа конфигуратора. Инсталлятор можно скачать по [ссылке](https://github.com/FreeJoy-Team/FreeJoyConfigurator/releases).
